import java.util.Arrays;
import java.util.Random;

public class Main {
    public static void main(String[] args) {
        int[] données = générerDonnéesEntreBornes(20, 0, 20);   
        afficher(données);
        System.out.print("valeur la plus proche : ");
        System.out.println(valeurLaPlusProche(données, 15));
    }

    public static int[] générerDonnéesEntreBornes(int longueur, int min, int max) {            Random random = new Random();
        int[] t = new int[longueur];
        for (int i = 0 ; i < t.length ; i++)
            t[i] = random.nextInt(max-min+1)+min; // nextInt(borne) retourne un int compris entre 0 inclus et borne exclus.
        return t;
    }

    public static void afficher(int[] tab){
        for(int i = 1; i < tab.length; i++){
            System.out.print(tab[i] + " ");
        }
        System.out.println();
    }

    //La question 3.a
    public static int valeurLaPlusProche(int[] tab, int valeur){
        int plusProche = tab[0];
        int i=0;
    
        while(i < tab.length && plusProche!=valeur){
            int distanceActuelle = Math.abs(tab[i]-valeur);
            int distancePlusProche = Math.abs(plusProche-valeur);
            
            if(distanceActuelle<distancePlusProche)
                plusProche = tab[i];
            else if(distanceActuelle==distancePlusProche && plusProche<tab[i])
                plusProche = tab[i];
            i++;
        }
        return plusProche;
    }

    //La questions 3.b
    public static int valeurLaPlusProcheDichotomique(int[] tab, int valeur){
        int indDebut = 0;
        int indFin = tab.length - 1;
        int indMilieu;
        int plusProche = tab[0];
    
        while(indDebut <= indFin){
            indMilieu = (indDebut + indFin) / 2;
            int distanceActuelle = Math.abs(tab[indMilieu]-valeur);
            int distancePlusProche = Math.abs(plusProche-valeur);
    
            if(distanceActuelle < distancePlusProche){
                plusProche = tab[indMilieu];
            }
            else if(distanceActuelle == distancePlusProche && tab[indMilieu] > plusProche){
                plusProche = tab[indMilieu];
            }
            
            if(tab[indMilieu] == valeur){
                return tab[indMilieu];
            }
            else if(valeur > tab[indMilieu]){
                indDebut = indMilieu + 1;
            }
            else{
                indFin = indMilieu - 1;
            }
        }
        return plusProche;
    }
}
